/* ========== Style global ========== */
:root{
  --bg:#0b1020; --felt:#0f1b2d; --text:#e6edf6;
  --accent-red:#f87171; --accent-blue:#60a5fa;
  --card-w:clamp(72px,8.5vw,110px); --rad:12px; --gap:10px;
}
*{box-sizing:border-box}
body{
  margin:0; min-height:100vh; display:grid; place-items:center;
  background: radial-gradient(1200px 600px at 50% -10%, #13213a 0%, #0b1020 60%) fixed, var(--bg);
  color:var(--text); font-family:system-ui,Segoe UI,Roboto,Arial;
  overflow-x:hidden;
}
.table{
  width:min(1400px,98vw);
  background:linear-gradient(180deg,#0f1b2d 0%,#0b1426 100%);
  border:1px solid #1a2740; border-radius:20px;
  padding:clamp(12px,2vw,24px);
  box-shadow:0 10px 30px rgba(0,0,0,.4);
  display:grid; gap:var(--gap);
  grid-template-rows:auto auto 1fr auto auto;
}
header{
  display:flex; justify-content:space-between; align-items:center; flex-wrap:wrap; gap:8px;
}
.tag{ padding:6px 12px; border-radius:999px; font-weight:600; background:#101a2e; border:1px solid #1f2c46; font-size:.9rem; }
.tag.att{ border-color:#3a1717; background:#1a0f12; color:#fecaca; }
.tag.def{ border-color:#152b4a; background:#0f1626; color:#bfdbfe; }
.hint{ font-size:.9rem; opacity:.85; text-align:center; flex:1; }

/* ========== Champ de bataille ========== */
.battlefield{
  border:1px solid #1a2740; border-radius:16px; padding:12px;
  /* 3 (0–30%) | 2 neutres (30–50%) | 5 (50–100%) */
  background: linear-gradient(90deg,
    rgba(248,113,113,.06) 0%, rgba(248,113,113,.06) 30%,
    transparent 30%, transparent 50%,
    rgba(96,165,250,.06) 50%, rgba(96,165,250,.06) 100%
  );
}
.lanes{
  display:grid; gap:var(--gap); justify-content:center;
  grid-template-columns:repeat(10, var(--card-w));
  grid-template-rows:repeat(5, calc(var(--card-w)*1.4));
}
.slot{
  border:1px dashed #2c3d60; border-radius:var(--rad);
  display:grid; place-items:center; position:relative; background:#0d172b;
  transition:border-color .15s, transform .1s, box-shadow .15s;
}
/* Teintes de zones (visuel) : gauche = Att, centre = neutre, droite = Déf */
.slot[data-owner="p1"]::before,
.slot[data-owner="neutral"]::before,
.slot[data-owner="p2"]::before{
  content:""; position:absolute; inset:0; border-radius:inherit; opacity:.07; pointer-events:none;
}
.slot[data-owner="p1"]::before{ background:var(--accent-red); }    /* Attaquant à gauche (3 col.) */
.slot[data-owner="neutral"]::before{ background:#94a3b8; }         /* Neutre au centre (2 col.) */
.slot[data-owner="p2"]::before{ background:var(--accent-blue); }   /* Défenseur à droite (5 col.) */

/* ========== Cartes ========== */
.card{
  width:92%; aspect-ratio:63/88; border-radius:calc(var(--rad) - 2px);
  background:linear-gradient(135deg,#1a2a46,#243b69 55%,#1b2f55 100%);
  border:2px solid #3a4e7b; display:grid; place-items:center; position:relative;
  font-weight:700; text-transform:uppercase; text-align:center;
  box-shadow:0 6px 16px rgba(0,0,0,.45);
  user-select:none; cursor:grab; overflow:hidden;
  transform:perspective(600px) rotateX(0) rotateY(0);
  transition:transform .2s, box-shadow .2s;
}
.card.att{ background:linear-gradient(135deg,#4a1111,#a11d1d 70%,#611313); border-color:#f87171; }
.card.def{ background:linear-gradient(135deg,#11233f,#245bb0 70%,#193760); border-color:#60a5fa; }
.card:hover{ transform:perspective(600px) rotateX(6deg) rotateY(6deg) scale(1.06); box-shadow:0 15px 25px rgba(0,0,0,.6); z-index:10; }
.card img{ width:100%; height:100%; object-fit:cover; opacity:.9; pointer-events:none; }
.card .overlay{ position:absolute; inset:0; background:linear-gradient(to bottom, rgba(0,0,0,.15), rgba(0,0,0,.45)); }
.cost{ position:absolute; top:4px; left:4px; background:rgba(0,0,0,.6); border:2px solid #facc15; border-radius:50%; width:26px; height:26px; display:flex; align-items:center; justify-content:center; font-size:.8rem; color:#fff; font-weight:700; }
.atk,.hp{
  position:absolute; bottom:4px; width:24px; height:24px; border-radius:50%;
  border:2px solid #fff; display:flex; align-items:center; justify-content:center; font-size:.7rem; color:#fff; font-weight:700;
}
.atk{ left:4px; background:#ef4444; } .hp{ right:4px; background:#22c55e; }
.info{ position:absolute; bottom:6px; width:100%; text-align:center; font-size:.75rem; padding:0 4px; }

/* ========== Mains en éventail ========== */
.hand-container{
  position:relative; display:flex; justify-content:center; align-items:flex-end;
  margin:0 auto; perspective:1200px; height:180px; overflow:visible;
}
.hand{
  --count:1; position:relative; display:flex; align-items:flex-end; justify-content:center;
  transform-style:preserve-3d; gap:0; padding-bottom:12px;
}
.hand .card{
  --i:0; --spread:28deg; --lift:28px; --w:clamp(92px,10vw,140px);
  width:var(--w); aspect-ratio:63/88; transform-origin:bottom center; margin:0 -22px;
  transition:transform .2s, z-index .2s, box-shadow .2s;
  z-index:calc(100 + var(--i));
  transform:
    rotateZ(calc(var(--spread) * ((var(--i) - (var(--count) - 1)/2) / max(var(--count) - 1, 1))))
    translateY(calc(-1 * var(--lift) * abs((var(--i) - (var(--count) - 1)/2) / max(var(--count) - 1, 1))));
}
.hand .card:hover{
  transform: rotateZ(0deg) translateY(-60px) scale(1.1);
  z-index:999; box-shadow:0 14px 30px rgba(0,0,0,.55), 0 0 0 3px rgba(103,232,249,.35);
}

/* ========== Contrôles / badges ========== */
.controls{ display:flex; justify-content:space-around; flex-wrap:wrap; margin-top:12px; gap:8px; }
button{ background:#1e293b; color:#e2e8f0; border:none; border-radius:6px; padding:6px 10px; font-weight:600; cursor:pointer; transition:background .15s; }
button:hover{ background:#334155; }
.badge{
  display:inline-flex; align-items:center; gap:6px;
  padding:6px 10px; border-radius:999px; background:#0f1b2d; border:1px solid #1f2c46;
  font-size:.85rem; color:#e6edf6; margin-left:8px;
}
.mana-badge{ border-color:#facc15; }
.turn-active{ box-shadow: 0 0 0 3px rgba(250, 204, 21, .35); border-radius: 12px; }

/* ========== Drag & Drop feedback ========== */
.slot[data-highlight="ok"]{ border-color:#67e8f9; box-shadow:0 0 0 2px rgba(103,232,249,.35); transform:translateY(-1px); }
.slot[data-highlight="bad"]{ border-color:#ef4444; box-shadow:0 0 0 2px rgba(239,68,68,.35); }
.card.dragging{ opacity:.6; box-shadow:0 10px 28px rgba(0,0,0,.6); transform:scale(1.02); }
